{
  "data": {
    "companies": [
      {
        "id": 1,
        "name": "TechCorp",
        "address": {
          "street": "123 Tech Ave",
          "city": "Silicon Valley",
          "country": "USA"
        },
        "departments": [
          {
            "id": 101,
            "name": "Engineering",
            "employees": [
              {
                "id": 1001,
                "name": "John Doe",
                "skills": ["JavaScript", "C#"],
                "projects": ["ProjectA", "ProjectB"]
              },
              {
                "id": 1002,
                "name": "Jane Smith",
                "skills": ["Python", "SQL"],
                "projects": ["ProjectC"]
              }
            ]
          },
          {
            "id": 102,
            "name": "Marketing",
            "employees": [
              {
                "id": 1003,
                "name": "Bob Wilson",
                "skills": ["SEO", "Analytics"],
                "projects": ["CampaignX"]
              }
            ]
          }
        ]
      }
    ]
  },
  "script": "[{\"path\":\"$.companies[*]\",\"command\":\"flatten\",\"flattenSettings\":{\"delimiter\":\".\",\"includeArrayIndices\":true,\"metadataPath\":\"$\",\"metadataKey\":\"_flattenMetadata\"}}]",
  "expected": {
    "companies": [
      {
        "id": 1,
        "id_type": "Integer",
        "name": "TechCorp",
        "name_type": "String",
        "address.street": "123 Tech Ave",
        "address.street_type": "String",
        "address.city": "Silicon Valley",
        "address.city_type": "String",
        "address.country": "USA",
        "address.country_type": "String",
        "departments.0.id": 101,
        "departments.0.id_type": "Integer",
        "departments.0.name": "Engineering",
        "departments.0.name_type": "String",
        "departments.0.employees.0.id": 1001,
        "departments.0.employees.0.id_type": "Integer",
        "departments.0.employees.0.name": "John Doe",
        "departments.0.employees.0.name_type": "String",
        "departments.0.employees.0.skills.0": "JavaScript",
        "departments.0.employees.0.skills.0_type": "String",
        "departments.0.employees.0.skills.1": "C#",
        "departments.0.employees.0.skills.1_type": "String",
        "departments.0.employees.0.projects.0": "ProjectA",
        "departments.0.employees.0.projects.0_type": "String",
        "departments.0.employees.0.projects.1": "ProjectB",
        "departments.0.employees.0.projects.1_type": "String",
        "departments.0.employees.1.id": 1002,
        "departments.0.employees.1.id_type": "Integer",
        "departments.0.employees.1.name": "Jane Smith",
        "departments.0.employees.1.name_type": "String",
        "departments.0.employees.1.skills.0": "Python",
        "departments.0.employees.1.skills.0_type": "String",
        "departments.0.employees.1.skills.1": "SQL",
        "departments.0.employees.1.skills.1_type": "String",
        "departments.0.employees.1.projects.0": "ProjectC",
        "departments.0.employees.1.projects.0_type": "String",
        "departments.1.id": 102,
        "departments.1.id_type": "Integer",
        "departments.1.name": "Marketing",
        "departments.1.name_type": "String",
        "departments.1.employees.0.id": 1003,
        "departments.1.employees.0.id_type": "Integer",
        "departments.1.employees.0.name": "Bob Wilson",
        "departments.1.employees.0.name_type": "String",
        "departments.1.employees.0.skills.0": "SEO",
        "departments.1.employees.0.skills.0_type": "String",
        "departments.1.employees.0.skills.1": "Analytics",
        "departments.1.employees.0.skills.1_type": "String",
        "departments.1.employees.0.projects.0": "CampaignX",
        "departments.1.employees.0.projects.0_type": "String"
      }
    ],
    "_flattenMetadata": {
      "originalStructure": {
        "address": "object",
        "departments": "array[2]",
        "departments.0": "object",
        "departments.0.employees": "array[2]",
        "departments.0.employees.0": "object",
        "departments.0.employees.0.skills": "array[2]",
        "departments.0.employees.0.projects": "array[2]",
        "departments.0.employees.1": "object",
        "departments.0.employees.1.skills": "array[2]",
        "departments.0.employees.1.projects": "array[1]",
        "departments.1": "object",
        "departments.1.employees": "array[1]",
        "departments.1.employees.0": "object",
        "departments.1.employees.0.skills": "array[2]",
        "departments.1.employees.0.projects": "array[1]"
      },
      "delimiter": ".",
      "arrayDelimiter": ".",
      "includeArrayIndices": true,
      "preserveTypes": true,
      "typeIndicator": "_type",
      "timestamp": "2025-01-07T15:30:00Z",
      "version": "1.0",
      "rootPath": "$.[0]",
      "metadataKey": "_flattenMetadata"
    }
  }
}